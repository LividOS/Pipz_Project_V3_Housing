; ------------------------------------------------------------------
; GEMINI MEM TAG (DO NOT EVER REMOVE OR EDIT) - MY FULL PATH IS "Pipz_Project_V3\PROJECT_LEARNED_CONSTRAINTS.txt"
; ------------------------------------------------------------------

; ------------------------------------------------------------------
; MAINTEMPLATE - PROJECT_LEARNED_CONSTRAINTS.txt
; Version: 1.0.1
; Last change: Normalized formatting for Drive preview stability; no semantic changes.
; Content-Fingerprint: 2026-01-21T20-58-41Z-JJFHUQIY
; ------------------------------------------------------------------

; ------------------------------------------------------------------
; ALL CONTENT MUST GO BELOW THIS POINT(LINES 1-14 RESERVED)
; ------------------------------------------------------------------

; ------------------------------------------------------------------
NON-AUTHORITATIVE NOTICE (MANDATORY)
; ------------------------------------------------------------------

This document records empirically discovered constraints, invalidated approaches, and
high-signal implementation notes to prevent regressions across sessions and AI systems.

This document does NOT:

; - Define governance rules
; - Override AI_PROJECT_INSTRUCTIONS.txt
; - Override BOOTSTRAPv4.txt
; - Override _PROJECT_BLUEPRINT.txt
; - Override GLOBAL STATE REGISTRY.gsheet
; - Override registry ownership, structure, or invariants

If any entry in this document conflicts with authoritative sources:

; - The authoritative source wins
; - The conflict MUST be reported
; - The entry MUST NOT be used as justification for changes

This file is institutional memory only.

; ------------------------------------------------------------------
SCOPE INDEXING PROTOCOL (STRICT)
; ------------------------------------------------------------------

Every entry MUST contain a SCOPE field using the scope taxonomy below.
Entries MUST be written atomically and be independently verifiable.

Entries MUST be added only when:

; - An approach was explicitly invalidated (failed, incorrect, or regressive), OR
; - A constraint was explicitly confirmed (required to prevent breakage)

Narrative, opinions, and "best practices" without a confirmed outcome are prohibited.

; ------------------------------------------------------------------
SCOPE TAXONOMY (CANONICAL)
; ------------------------------------------------------------------

Use EXACTLY ONE SCOPE per entry:

; - Governance
; - Bootstrap
; - Indexing
; - Phase5
; - Controller
; - Controller\Modules
; - Worker
; - Worker\Modules
; - Lib
; - CrossCutting

; ------------------------------------------------------------------
ENTRY FORMAT (STRICT)
; ------------------------------------------------------------------

ENTRY ID: PLC-0000
DATE (UTC): YYYY-MM-DD
SCOPE: <one from taxonomy>
STATUS: CONFIRMED | INVALIDATED | DEPRECATED
TITLE: <short summary>

CONTEXT:
<What subsystem, file, or behavior was being worked on?>

DISCOVERY:
<What was learned? Factual, testable, and concise.>

INVALIDATED APPROACH:
<If STATUS=INVALIDATED, list the rejected method(s) here. Otherwise write: N/A>

VALIDATED CONSTRAINT:
<If STATUS=CONFIRMED, list the constraint(s) here. Otherwise write: N/A>

EVIDENCE:
<What observation confirms this? Logs, reproducible steps, file references, etc.>

RELATED FILES:
<List relevant project files (paths), if applicable>

NOTES:
<Optional. Must remain factual.>

; ------------------------------------------------------------------
SCOPE INDEX (MUST BE MAINTAINED)
; ------------------------------------------------------------------

Format:
SCOPE | ENTRY IDS

Governance | PLC-0001
Bootstrap  | (none)
Indexing   | (none)
Phase5     | (none)
Controller | (none)
Controller\Modules | (none)
Worker     | (none)
Worker\Modules | (none)
Lib        | (none)
CrossCutting | PLC-0002, PLC-0003, PLC-0004, PLC-0005

; ------------------------------------------------------------------
ENTRIES (APPEND ONLY BELOW THIS LINE)
; ------------------------------------------------------------------

ENTRY ID: PLC-0001
DATE (UTC): 2026-01-21
SCOPE: Governance
STATUS: CONFIRMED
TITLE: Google Drive preview truncates structured governance files unless formatting is normalized

CONTEXT:
AI governance and bootstrap files stored in Google Drive were intermittently unreadable or partially truncated when accessed via preview or connector-based reads.

DISCOVERY:
Google Drive preview and extraction systems may truncate or fail to fully render governance documents that contain dense structural formatting such as repeated ASCII delimiter blocks (e.g. "=====", "---"), mixed delimiter styles, or Markdown-like constructs, even when file size is small.

INVALIDATED APPROACH:
Storing governance files with mixed or stacked delimiters, Markdown horizontal rules, or long single-character separator blocks.

VALIDATED CONSTRAINT:
Governance files must use a single, non-Markdown, commented delimiter style and avoid dense or mixed ASCII separator patterns to ensure full Drive preview and connector readability.

EVIDENCE:
Multiple governance files became fully readable in Drive only after delimiter normalization and removal of Markdown constructs; prior versions consistently truncated.

RELATED FILES:
Pipz_Project_V3\AI_PROJECT_INSTRUCTIONS.txt
Pipz_Project_V3\_PROJECT_BLUEPRINT.txt
Pipz_Project_V3\_PROJECT_ANCHOR.txt
Pipz_Project_V3\BOOTSTRAPv4.txt

NOTES:
This constraint was reproduced across multiple files and confirmed via Drive preview visibility to file end.

; ------------------------------------------------------------------

ENTRY ID: PLC-0002
DATE (UTC): 2026-01-21
SCOPE: CrossCutting
STATUS: CONFIRMED
TITLE: Canonical commented delimiter required for governance file stability

CONTEXT:
Multiple governance and audit files required normalization to ensure consistent readability and prevent Drive-based truncation.

DISCOVERY:
A single commented delimiter line is reliably treated as plain text by Google Drive preview and extraction systems, while legacy or Markdown-style delimiters are not.

INVALIDATED APPROACH:
Use of "=====", "---", mixed delimiter styles, or Markdown section separators in governance documents.

VALIDATED CONSTRAINT:
All governance and audit files must standardize on the canonical delimiter:
"; ------------------------------------------------------------------"

EVIDENCE:
After standardizing on this delimiter, all governance files rendered fully in Drive preview and were readable end-to-end.

RELATED FILES:
Pipz_Project_V3\AI_PROJECT_INSTRUCTIONS.txt
Pipz_Project_V3\_PROJECT_BLUEPRINT.txt
Pipz_Project_V3\PROJECT_LEARNED_CONSTRAINTS.txt

NOTES:
Delimiter choice is formatting-only and does not confer authority.

; ------------------------------------------------------------------

ENTRY ID: PLC-0003
DATE (UTC): 2026-01-21
SCOPE: CrossCutting
STATUS: CONFIRMED
TITLE: UTF-16 mis-decoding can cause intermittent GEMINI path extraction failures in mirroring scripts

CONTEXT:
MirrorAhkToTxt.py intermittently logged "missing project path in GEMINI MEM TAG; skipping mirror" even when the GEMINI MEM TAG line was present.

DISCOVERY:
If runtime text is decoded incorrectly (e.g., UTF-8 bytes mis-decoded as UTF-16), header scanning and regex extraction may fail inconsistently across saves, sometimes triggered by small whitespace changes.

INVALIDATED APPROACH:
Blindly attempting UTF-16 decoding first for all buffer text without BOM/NUL detection.

VALIDATED CONSTRAINT:
Text decoding in mirroring/fingerprinting utilities must be BOM/NUL-aware: only prefer UTF-16 when strongly indicated (BOM or NUL bytes); otherwise prefer UTF-8.

EVIDENCE:
Header/path extraction failures occurred inconsistently until BOM/NUL-aware decoding was used, after which mirroring behaved deterministically across whitespace-only edits.

RELATED FILES:
Pipz_Project_V3\MirrorAhkToTxt.py

NOTES:
This is a tooling-layer constraint; it does not change governance semantics.

; ------------------------------------------------------------------

ENTRY ID: PLC-0004
DATE (UTC): 2026-01-21
SCOPE: CrossCutting
STATUS: CONFIRMED
TITLE: AI SOT header must exist only in .txt mirrors, never in runtime .ahk/.ini files

CONTEXT:
MirrorAhkToTxt.py showed inconsistent behavior and false "missing project path" errors during fingerprint/mirror operations.

DISCOVERY:
Placing the AI SOT mirror header inside a runtime file (.ahk/.ini) can interfere with header scanning assumptions and lead to incorrect mirroring/fingerprinting behavior.

INVALIDATED APPROACH:
Including the AI SOT header block inside runtime files.

VALIDATED CONSTRAINT:
Runtime files (.ahk/.ini) must contain only the GEMINI MEM TAG + MAINTEMPLATE header (with Content-Fingerprint). The AI SOT header is reserved exclusively for .txt mirror outputs.

EVIDENCE:
Removing the AI SOT header from runtime files restored deterministic fingerprinting and mirroring behavior.

RELATED FILES:
Pipz_Project_V3\MirrorAhkToTxt.py
Pipz_Project_V3\Settings.ini
Pipz_Project_V3\Settings.txt

NOTES:
This constraint prevents regression when normalizing headers and delimiters.

; ------------------------------------------------------------------

ENTRY ID: PLC-0005
DATE (UTC): 2026-01-21
SCOPE: CrossCutting
STATUS: CONFIRMED
TITLE: LLM whitespace cleanup can alter Python indentation and break MirrorAhkToTxt.py

CONTEXT:
MirrorAhkToTxt.py was passed through an external AI tool for "removing empty/unnecessary lines" to reduce visual bloat.

DISCOVERY:
LLM formatting passes can modify indentation or line structure even when instructed to only remove blank lines. In Python, indentation is semantic; accidental indentation changes can introduce syntax errors or change block structure.

INVALIDATED APPROACH:
Using an LLM to mass-remove blank lines or "normalize whitespace" in Python scripts without a deterministic verification step.

VALIDATED CONSTRAINT:
Whitespace cleanup for Python scripts must be mechanical and indentation-preserving (e.g., collapsing consecutive blank lines only) or must be followed by a strict syntax/indentation verification step before deployment.

EVIDENCE:
Gemini-cleaned MirrorAhkToTxt.py introduced an indentation change that required correction before the script could be treated as safe.

RELATED FILES:
Pipz_Project_V3\MirrorAhkToTxt.py

NOTES:
This is a tooling safety constraint; it does not change project governance semantics.

; ------------------------------------------------------------------

(NEXT ENTRY GOES HERE)